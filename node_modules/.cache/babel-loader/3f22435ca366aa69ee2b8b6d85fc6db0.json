{"ast":null,"code":"import _toConsumableArray from\"/home/kurlyana/UCU/SEM4/WEB/store-general-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/kurlyana/UCU/SEM4/WEB/store-general-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{ADD_TO_CART,REMOVE_FROM_CART,SUB_QUANTITY,ADD_QUANTITY,EMPTY_CART}from'./actionTypes.js';var initialState={products:[{\"id\":0,\"name\":\"TS1\",\"image\":\"https://shop.vintageofbikes.com/wp-content/uploads/2017/07/peugggg2-300x300.jpg\",\"desc\":\"Nice velo T-shirt\",\"price\":\"$20\",\"quantity\":2,\"selected\":false},{\"id\":1,\"name\":\"TS2\",\"image\":\"https://shop.vintageofbikes.com/wp-content/uploads/2017/10/Capture-d%E2%80%99e%CC%81cran-2018-12-19-a%CC%80-3.10.16-PM-300x300.png\",\"desc\":\"Nice velo T-shirt\",\"price\":\"$30\",\"quantity\":1,\"selected\":false},{\"id\":2,\"name\":\"TS3\",\"image\":\"https://shop.vintageofbikes.com/wp-content/uploads/2017/07/Sans-titre-5-300x300.jpg\",\"desc\":\"Nice velo T-shirt\",\"price\":\"$20\",\"quantity\":3,\"selected\":false},{\"id\":3,\"name\":\"TS4\",\"image\":\"https://shop.vintageofbikes.com/wp-content/uploads/2017/07/Capture-d%E2%80%99e%CC%81cran-2017-08-21-a%CC%80-12.17.25-copie-300x300.jpg\",\"desc\":\"Nice velo T-shirt\",\"price\":\"$20\",\"quantity\":2,\"selected\":false},{\"id\":4,\"name\":\"TS5\",\"image\":\"https://shop.vintageofbikes.com/wp-content/uploads/2017/07/maillot-cycliste-z-300x300.jpg\",\"desc\":\"Nice velo T-shirt\",\"price\":\"$20\",\"quantity\":2,\"selected\":false},{\"id\":5,\"name\":\"TS6\",\"image\":\"https://shop.vintageofbikes.com/wp-content/uploads/2017/08/HTB14AHhSpXXXXb8XXXXq6xXFXXX9-300x300.jpg\",\"desc\":\"Nice velo T-shirt\",\"price\":\"$20\",\"quantity\":2,\"selected\":false},{\"id\":6,\"name\":\"TS7\",\"image\":\"https://shop.vintageofbikes.com/wp-content/uploads/2017/08/Capture-d%E2%80%99e%CC%81cran-2017-09-07-a%CC%80-16.11.50-300x300.png\",\"desc\":\"Nice velo T-shirt\",\"price\":\"$20\",\"quantity\":2,\"selected\":false},{\"id\":7,\"name\":\"TS8\",\"image\":\"https://shop.vintageofbikes.com/wp-content/uploads/2017/08/hjbkj-300x300.jpg\",\"desc\":\"Nice velo T-shirt\",\"price\":\"$20\",\"quantity\":2,\"selected\":false},{\"id\":8,\"name\":\"TS9\",\"image\":\"https://i.ebayimg.com/images/g/tqcAAOSwXIdcO4gp/s-l300.png\",\"desc\":\"Nice velo T-shirt\",\"price\":\"$20\",\"quantity\":2,\"selected\":false},{\"id\":9,\"name\":\"TS10\",\"image\":\"https://shop.vintageofbikes.com/wp-content/uploads/2017/08/kbj-300x300.jpg\",\"desc\":\"Nice velo T-shirt\",\"price\":\"$20\",\"quantity\":2,\"selected\":false},{\"id\":10,\"name\":\"TS11\",\"image\":\"https://i.ebayimg.com/images/g/0IUAAOSw0NVbt6aG/s-l300.jpg\",\"desc\":\"Nice velo T-shirt\",\"price\":\"$20\",\"quantity\":2,\"selected\":false},{\"id\":11,\"name\":\"TS12\",\"image\":\"https://cdn.shopify.com/s/files/1/0012/0438/7852/products/peugeot-michelin-esso-shell-retro-cycling-jersey-cycling-jersey-outdoor-good-store-white-s-8_300x300.jpg?v=1574496722\",\"desc\":\"Nice velo T-shirt\",\"price\":\"$20\",\"quantity\":2,\"selected\":false}],addedProducts:[],total:0};var CartReducer=function CartReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ADD_TO_CART:var addedProduct=state.products.find(function(product){return product.id===action.id;});var existed_product=state.addedProducts.find(function(product){return action.id===product.id;});if(existed_product){addedProduct.quantity+=1;return _objectSpread(_objectSpread({},state),{},{total:state.total+addedProduct.price});}else{addedProduct.quantity=1;var _newTotal=state.total+addedProduct.price;return _objectSpread(_objectSpread({},state),{},{addedProducts:[].concat(_toConsumableArray(state.addedProducts),[addedProduct]),total:_newTotal});}case REMOVE_FROM_CART:var productToRemove=state.addedProducts.find(function(product){return action.id===product.id;});var new_products=state.addedProducts.filter(function(product){return action.id!==product.id;});var newTotal=state.total-productToRemove.price*productToRemove.quantity;console.log(productToRemove);return _objectSpread(_objectSpread({},state),{},{addedProducts:new_products,total:newTotal});case ADD_QUANTITY:var addedProduct1=state.products.find(function(product){return product.id===action.id;});addedProduct1.quantity+=1;var newTotal1=state.total+addedProduct1.price;return _objectSpread(_objectSpread({},state),{},{total:newTotal1});case SUB_QUANTITY:var addedItem=state.products.find(function(product){return product.id===action.id;});if(addedItem.quantity===1){var new_items=state.addedProducts.filter(function(product){return product.id!==action.id;});var newTotal2=state.total-addedItem.price;return _objectSpread(_objectSpread({},state),{},{addedItems:new_items,total:newTotal2});}else{addedItem.quantity-=1;var newTotal3=state.total-addedItem.price;return _objectSpread(_objectSpread({},state),{},{total:newTotal3});}// case EMPTY_CART:\n//   return {\n//     ...state,\n//     products: state.products.map(product =>\n//       product.selected\n//         ? {...product, selected: false, quantity: 1}\n//         : product,\n//     ),\n//   };\ndefault:return state;}};export default CartReducer;","map":{"version":3,"sources":["/home/kurlyana/UCU/SEM4/WEB/store-general-app/src/redux/reducers.js"],"names":["ADD_TO_CART","REMOVE_FROM_CART","SUB_QUANTITY","ADD_QUANTITY","EMPTY_CART","initialState","products","addedProducts","total","CartReducer","state","action","type","addedProduct","find","product","id","existed_product","quantity","price","newTotal","productToRemove","new_products","filter","console","log","addedProduct1","newTotal1","addedItem","new_items","newTotal2","addedItems","newTotal3"],"mappings":"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","sourcesContent":["import {ADD_TO_CART, REMOVE_FROM_CART, SUB_QUANTITY, ADD_QUANTITY, EMPTY_CART} from './actionTypes.js';\n\nconst initialState = {\n  products: [\n      {\n      \"id\": 0,\n      \"name\": \"TS1\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/07/peugggg2-300x300.jpg\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    },\n    {\n      \"id\": 1,\n      \"name\": \"TS2\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/10/Capture-d%E2%80%99e%CC%81cran-2018-12-19-a%CC%80-3.10.16-PM-300x300.png\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$30\",\n      \"quantity\": 1,\n      \"selected\": false\n    },\n    {\n      \"id\": 2,\n      \"name\": \"TS3\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/07/Sans-titre-5-300x300.jpg\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 3,\n      \"selected\": false\n    },\n    {\n      \"id\": 3,\n      \"name\": \"TS4\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/07/Capture-d%E2%80%99e%CC%81cran-2017-08-21-a%CC%80-12.17.25-copie-300x300.jpg\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    },\n    {\n      \"id\": 4,\n      \"name\": \"TS5\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/07/maillot-cycliste-z-300x300.jpg\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    },\n      {\n      \"id\": 5,\n      \"name\": \"TS6\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/08/HTB14AHhSpXXXXb8XXXXq6xXFXXX9-300x300.jpg\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    }\n    ,\n      {\n      \"id\": 6,\n      \"name\": \"TS7\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/08/Capture-d%E2%80%99e%CC%81cran-2017-09-07-a%CC%80-16.11.50-300x300.png\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    }\n    ,\n      {\n      \"id\": 7,\n      \"name\": \"TS8\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/08/hjbkj-300x300.jpg\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    }\n    ,\n      {\n      \"id\": 8,\n      \"name\": \"TS9\",\n      \"image\": \"https://i.ebayimg.com/images/g/tqcAAOSwXIdcO4gp/s-l300.png\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    }\n    ,\n      {\n      \"id\": 9,\n      \"name\": \"TS10\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/08/kbj-300x300.jpg\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    }\n    ,\n      {\n      \"id\": 10,\n      \"name\": \"TS11\",\n      \"image\": \"https://i.ebayimg.com/images/g/0IUAAOSw0NVbt6aG/s-l300.jpg\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    }\n    ,\n      {\n      \"id\": 11,\n      \"name\": \"TS12\",\n      \"image\": \"https://cdn.shopify.com/s/files/1/0012/0438/7852/products/peugeot-michelin-esso-shell-retro-cycling-jersey-cycling-jersey-outdoor-good-store-white-s-8_300x300.jpg?v=1574496722\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    }\n  ],\n  addedProducts:[],\n  total: 0\n};\n\nconst CartReducer = (state = initialState, action) => {\n  switch (action.type) {\n\n    case ADD_TO_CART:\n         let addedProduct = state.products.find(product=> product.id === action.id)\n         let existed_product= state.addedProducts.find(product=> action.id === product.id)\n         if(existed_product)\n         {\n            addedProduct.quantity += 1\n             return{\n                ...state,\n                 total: state.total + addedProduct.price\n                  }\n         }\n         else{\n             addedProduct.quantity = 1;\n             let newTotal = state.total + addedProduct.price\n\n             return{\n                ...state,\n                addedProducts: [...state.addedProducts, addedProduct],\n                total : newTotal\n            }\n         }\n\n    case REMOVE_FROM_CART:\n        let productToRemove= state.addedProducts.find(product=> action.id === product.id)\n        let new_products = state.addedProducts.filter(product=> action.id !== product.id)\n\n        let newTotal = state.total - (productToRemove.price * productToRemove.quantity )\n        console.log(productToRemove)\n        return{\n            ...state,\n            addedProducts: new_products,\n            total: newTotal\n        }\n\n    case ADD_QUANTITY:\n          let addedProduct1 = state.products.find(product=> product.id === action.id)\n          addedProduct1.quantity += 1\n          let newTotal1 = state.total + addedProduct1.price\n          return{\n              ...state,\n              total: newTotal1\n          }\n\n    case SUB_QUANTITY:\n      let addedItem = state.products.find(product=> product.id === action.id)\n        if(addedItem.quantity === 1){\n            let new_items = state.addedProducts.filter(product=>product.id !== action.id)\n            let newTotal2 = state.total - addedItem.price\n            return{\n                ...state,\n                addedItems: new_items,\n                total: newTotal2\n            }\n        }\n        else {\n            addedItem.quantity -= 1\n            let newTotal3 = state.total - addedItem.price\n            return{\n                ...state,\n                total: newTotal3\n            }\n        }\n\n    // case EMPTY_CART:\n    //   return {\n    //     ...state,\n    //     products: state.products.map(product =>\n    //       product.selected\n    //         ? {...product, selected: false, quantity: 1}\n    //         : product,\n    //     ),\n    //   };\n\n    default:\n      return state;\n  }\n};\n\nexport default CartReducer;"]},"metadata":{},"sourceType":"module"}