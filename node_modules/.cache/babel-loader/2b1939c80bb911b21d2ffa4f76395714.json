{"ast":null,"code":"import { ADD_TO_CART, REMOVE_FROM_CART, SUB_QUANTITY, ADD_QUANTITY, EMPTY_CART } from './actionTypes.js';\nconst initialState = {\n  products: [{\n    \"id\": 0,\n    \"name\": \"TS1\",\n    \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/07/peugggg2-300x300.jpg\",\n    \"desc\": \"Nice velo T-shirt\",\n    \"price\": \"$20\",\n    \"quantity\": 2,\n    \"selected\": false\n  }, {\n    \"id\": 1,\n    \"name\": \"TS2\",\n    \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/10/Capture-d%E2%80%99e%CC%81cran-2018-12-19-a%CC%80-3.10.16-PM-300x300.png\",\n    \"desc\": \"Nice velo T-shirt\",\n    \"price\": \"$30\",\n    \"quantity\": 1,\n    \"selected\": false\n  }, {\n    \"id\": 2,\n    \"name\": \"TS3\",\n    \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/07/Sans-titre-5-300x300.jpg\",\n    \"desc\": \"Nice velo T-shirt\",\n    \"price\": \"$20\",\n    \"quantity\": 3,\n    \"selected\": false\n  }, {\n    \"id\": 3,\n    \"name\": \"TS4\",\n    \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/07/Capture-d%E2%80%99e%CC%81cran-2017-08-21-a%CC%80-12.17.25-copie-300x300.jpg\",\n    \"desc\": \"Nice velo T-shirt\",\n    \"price\": \"$20\",\n    \"quantity\": 2,\n    \"selected\": false\n  }, {\n    \"id\": 4,\n    \"name\": \"TS5\",\n    \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/07/maillot-cycliste-z-300x300.jpg\",\n    \"desc\": \"Nice velo T-shirt\",\n    \"price\": \"$20\",\n    \"quantity\": 2,\n    \"selected\": false\n  }, {\n    \"id\": 5,\n    \"name\": \"TS6\",\n    \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/08/HTB14AHhSpXXXXb8XXXXq6xXFXXX9-300x300.jpg\",\n    \"desc\": \"Nice velo T-shirt\",\n    \"price\": \"$20\",\n    \"quantity\": 2,\n    \"selected\": false\n  }, {\n    \"id\": 6,\n    \"name\": \"TS7\",\n    \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/08/Capture-d%E2%80%99e%CC%81cran-2017-09-07-a%CC%80-16.11.50-300x300.png\",\n    \"desc\": \"Nice velo T-shirt\",\n    \"price\": \"$20\",\n    \"quantity\": 2,\n    \"selected\": false\n  }, {\n    \"id\": 7,\n    \"name\": \"TS8\",\n    \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/08/hjbkj-300x300.jpg\",\n    \"desc\": \"Nice velo T-shirt\",\n    \"price\": \"$20\",\n    \"quantity\": 2,\n    \"selected\": false\n  }, {\n    \"id\": 8,\n    \"name\": \"TS9\",\n    \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/07/maillot-velo-vintage-pellegrino-300x300.jpg\",\n    \"desc\": \"Nice velo T-shirt\",\n    \"price\": \"$20\",\n    \"quantity\": 2,\n    \"selected\": false\n  }, {\n    \"id\": 9,\n    \"name\": \"TS10\",\n    \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/08/kbj-300x300.jpg\",\n    \"desc\": \"Nice velo T-shirt\",\n    \"price\": \"$20\",\n    \"quantity\": 2,\n    \"selected\": false\n  }, {\n    \"id\": 10,\n    \"name\": \"TS11\",\n    \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/07/HTB1vBsYKVXXXXboaXXXq6xXFXXXa-300x300.jpg\",\n    \"desc\": \"Nice velo T-shirt\",\n    \"price\": \"$20\",\n    \"quantity\": 2,\n    \"selected\": false\n  }, {\n    \"id\": 11,\n    \"name\": \"TS9\",\n    \"image\": \"https://cdn.shopify.com/s/files/1/0012/0438/7852/products/peugeot-michelin-esso-shell-retro-cycling-jersey-cycling-jersey-outdoor-good-store-white-s-8_300x300.jpg?v=1574496722\",\n    \"desc\": \"Nice velo T-shirt\",\n    \"price\": \"$20\",\n    \"quantity\": 2,\n    \"selected\": false\n  }],\n  addedProducts: [],\n  total: 0\n};\n\nconst CartReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case ADD_TO_CART:\n      let addedProduct = state.products.find(product => product.id === action.id);\n      let existed_product = state.addedProducts.find(product => action.id === product.id);\n\n      if (existed_product) {\n        addedProduct.quantity += 1;\n        return { ...state,\n          total: state.total + addedProduct.price\n        };\n      } else {\n        addedProduct.quantity = 1;\n        let newTotal = state.total + addedProduct.price;\n        return { ...state,\n          addedProducts: [...state.addedproducts, addedProduct],\n          total: newTotal\n        };\n      }\n\n    case REMOVE_FROM_CART:\n      return { ...state,\n        products: state.products.map(product => product.id === action.id ? { ...product,\n          selected: false,\n          quantity: 1\n        } : product)\n      };\n\n    case ADD_QUANTITY:\n      return { ...state,\n        products: state.products.map(product => product.id === action.id ? { ...product,\n          quantity: product.quantity + 1\n        } : product)\n      };\n\n    case SUB_QUANTITY:\n      return { ...state,\n        products: state.products.map(product => product.id === action.id ? { ...product,\n          quantity: product.quantity !== 1 ? product.quantity - 1 : 1\n        } : product)\n      };\n\n    case EMPTY_CART:\n      return { ...state,\n        products: state.products.map(product => product.selected ? { ...product,\n          selected: false,\n          quantity: 1\n        } : product)\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default CartReducer;","map":{"version":3,"sources":["/home/kurlyana/UCU/SEM4/WEB/store-general-app/src/redux/reducers.js"],"names":["ADD_TO_CART","REMOVE_FROM_CART","SUB_QUANTITY","ADD_QUANTITY","EMPTY_CART","initialState","products","addedProducts","total","CartReducer","state","action","type","addedProduct","find","product","id","existed_product","quantity","price","newTotal","addedproducts","map","selected"],"mappings":"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","sourcesContent":["import {ADD_TO_CART, REMOVE_FROM_CART, SUB_QUANTITY, ADD_QUANTITY, EMPTY_CART} from './actionTypes.js';\n\nconst initialState = {\n  products: [\n      {\n      \"id\": 0,\n      \"name\": \"TS1\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/07/peugggg2-300x300.jpg\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    },\n    {\n      \"id\": 1,\n      \"name\": \"TS2\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/10/Capture-d%E2%80%99e%CC%81cran-2018-12-19-a%CC%80-3.10.16-PM-300x300.png\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$30\",\n      \"quantity\": 1,\n      \"selected\": false\n    },\n    {\n      \"id\": 2,\n      \"name\": \"TS3\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/07/Sans-titre-5-300x300.jpg\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 3,\n      \"selected\": false\n    },\n    {\n      \"id\": 3,\n      \"name\": \"TS4\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/07/Capture-d%E2%80%99e%CC%81cran-2017-08-21-a%CC%80-12.17.25-copie-300x300.jpg\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    },\n    {\n      \"id\": 4,\n      \"name\": \"TS5\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/07/maillot-cycliste-z-300x300.jpg\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    },\n      {\n      \"id\": 5,\n      \"name\": \"TS6\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/08/HTB14AHhSpXXXXb8XXXXq6xXFXXX9-300x300.jpg\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    }\n    ,\n      {\n      \"id\": 6,\n      \"name\": \"TS7\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/08/Capture-d%E2%80%99e%CC%81cran-2017-09-07-a%CC%80-16.11.50-300x300.png\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    }\n    ,\n      {\n      \"id\": 7,\n      \"name\": \"TS8\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/08/hjbkj-300x300.jpg\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    }\n    ,\n      {\n      \"id\": 8,\n      \"name\": \"TS9\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/07/maillot-velo-vintage-pellegrino-300x300.jpg\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    }\n    ,\n      {\n      \"id\": 9,\n      \"name\": \"TS10\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/08/kbj-300x300.jpg\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    }\n    ,\n      {\n      \"id\": 10,\n      \"name\": \"TS11\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/07/HTB1vBsYKVXXXXboaXXXq6xXFXXXa-300x300.jpg\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    }\n    ,\n      {\n      \"id\": 11,\n      \"name\": \"TS9\",\n      \"image\": \"https://cdn.shopify.com/s/files/1/0012/0438/7852/products/peugeot-michelin-esso-shell-retro-cycling-jersey-cycling-jersey-outdoor-good-store-white-s-8_300x300.jpg?v=1574496722\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    }\n  ],\n  addedProducts:[],\n  total: 0\n};\n\nconst CartReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case ADD_TO_CART:\n       let addedProduct = state.products.find(product=> product.id === action.id)\n         let existed_product= state.addedProducts.find(product=> action.id === product.id)\n         if(existed_product)\n         {\n            addedProduct.quantity += 1\n             return{\n                ...state,\n                 total: state.total + addedProduct.price\n                  }\n        }\n         else{\n            addedProduct.quantity = 1;\n            let newTotal = state.total + addedProduct.price\n\n            return{\n                ...state,\n                addedProducts: [...state.addedproducts, addedProduct],\n                total : newTotal\n            }\n\n        }\n    case REMOVE_FROM_CART:\n      return {\n        ...state,\n        products: state.products.map(product =>\n          product.id === action.id\n            ? {...product, selected: false, quantity: 1}\n            : product,\n        ),\n      };\n    case ADD_QUANTITY:\n      return {\n        ...state,\n        products: state.products.map(product =>\n          product.id === action.id\n            ? {...product, quantity: product.quantity + 1}\n            : product,\n        ),\n      };\n    case SUB_QUANTITY:\n      return {\n        ...state,\n        products: state.products.map(product =>\n          product.id === action.id\n            ? {\n                ...product,\n                quantity: product.quantity !== 1 ? product.quantity - 1 : 1,\n              }\n            : product,\n        ),\n      };\n    case EMPTY_CART:\n      return {\n        ...state,\n        products: state.products.map(product =>\n          product.selected\n            ? {...product, selected: false, quantity: 1}\n            : product,\n        ),\n      };\n    default:\n      return state;\n  }\n};\nexport default CartReducer;"]},"metadata":{},"sourceType":"module"}