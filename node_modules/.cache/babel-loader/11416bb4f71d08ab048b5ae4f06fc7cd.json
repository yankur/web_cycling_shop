{"ast":null,"code":"import { ADD_TO_CART, REMOVE_FROM_CART, SUB_QUANTITY, ADD_QUANTITY, EMPTY_CART } from './actionTypes.js';\nconst initialState = {\n  products: [{\n    \"id\": 0,\n    \"name\": \"TS1\",\n    \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/07/peugggg2-300x300.jpg\",\n    \"desc\": \"Nice velo T-shirt\",\n    \"price\": \"$20\",\n    \"quantity\": 2,\n    \"selected\": false\n  }, {\n    \"id\": 1,\n    \"name\": \"TS2\",\n    \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/10/Capture-d%E2%80%99e%CC%81cran-2018-12-19-a%CC%80-3.10.16-PM-300x300.png\",\n    \"desc\": \"Nice velo T-shirt\",\n    \"price\": \"$30\",\n    \"quantity\": 1,\n    \"selected\": false\n  }, {\n    \"id\": 2,\n    \"name\": \"TS3\",\n    \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/07/Sans-titre-5-300x300.jpg\",\n    \"desc\": \"Nice velo T-shirt\",\n    \"price\": \"$20\",\n    \"quantity\": 3,\n    \"selected\": false\n  }, {\n    \"id\": 3,\n    \"name\": \"TS4\",\n    \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/07/Capture-d%E2%80%99e%CC%81cran-2017-08-21-a%CC%80-12.17.25-copie-300x300.jpg\",\n    \"desc\": \"Nice velo T-shirt\",\n    \"price\": \"$20\",\n    \"quantity\": 2,\n    \"selected\": false\n  }, {\n    \"id\": 4,\n    \"name\": \"TS5\",\n    \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/07/maillot-cycliste-z-300x300.jpg\",\n    \"desc\": \"Nice velo T-shirt\",\n    \"price\": \"$20\",\n    \"quantity\": 2,\n    \"selected\": false\n  }, {\n    \"id\": 5,\n    \"name\": \"TS6\",\n    \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/08/HTB14AHhSpXXXXb8XXXXq6xXFXXX9-300x300.jpg\",\n    \"desc\": \"Nice velo T-shirt\",\n    \"price\": \"$20\",\n    \"quantity\": 2,\n    \"selected\": false\n  }, {\n    \"id\": 6,\n    \"name\": \"TS7\",\n    \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/08/Capture-d%E2%80%99e%CC%81cran-2017-09-07-a%CC%80-16.11.50-300x300.png\",\n    \"desc\": \"Nice velo T-shirt\",\n    \"price\": \"$20\",\n    \"quantity\": 2,\n    \"selected\": false\n  }, {\n    \"id\": 7,\n    \"name\": \"TS8\",\n    \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/08/hjbkj-300x300.jpg\",\n    \"desc\": \"Nice velo T-shirt\",\n    \"price\": \"$20\",\n    \"quantity\": 2,\n    \"selected\": false\n  }, {\n    \"id\": 8,\n    \"name\": \"TS9\",\n    \"image\": \"https://i.ebayimg.com/images/g/tqcAAOSwXIdcO4gp/s-l300.png\",\n    \"desc\": \"Nice velo T-shirt\",\n    \"price\": \"$20\",\n    \"quantity\": 2,\n    \"selected\": false\n  }, {\n    \"id\": 9,\n    \"name\": \"TS10\",\n    \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/08/kbj-300x300.jpg\",\n    \"desc\": \"Nice velo T-shirt\",\n    \"price\": \"$20\",\n    \"quantity\": 2,\n    \"selected\": false\n  }, {\n    \"id\": 10,\n    \"name\": \"TS11\",\n    \"image\": \"https://i.ebayimg.com/images/g/0IUAAOSw0NVbt6aG/s-l300.jpg\",\n    \"desc\": \"Nice velo T-shirt\",\n    \"price\": \"$20\",\n    \"quantity\": 2,\n    \"selected\": false\n  }, {\n    \"id\": 11,\n    \"name\": \"TS12\",\n    \"image\": \"https://cdn.shopify.com/s/files/1/0012/0438/7852/products/peugeot-michelin-esso-shell-retro-cycling-jersey-cycling-jersey-outdoor-good-store-white-s-8_300x300.jpg?v=1574496722\",\n    \"desc\": \"Nice velo T-shirt\",\n    \"price\": \"$20\",\n    \"quantity\": 2,\n    \"selected\": false\n  }],\n  addedProducts: [],\n  total: 0\n};\n\nconst CartReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case ADD_TO_CART:\n      let addedProduct = state.products.find(product => product.id === action.id);\n      let existed_product = state.addedProducts.find(product => action.id === product.id);\n\n      if (existed_product) {\n        addedProduct.quantity += 1;\n        return { ...state,\n          total: state.total + addedProduct.price\n        };\n      } else {\n        addedProduct.quantity = 1;\n        let newTotal = state.total + addedProduct.price;\n        return { ...state,\n          addedProducts: [...state.addedProducts, addedProduct],\n          total: newTotal\n        };\n      }\n\n    case REMOVE_FROM_CART:\n      let productToRemove = state.addedProducts.find(product => action.id === product.id);\n      let new_products = state.addedProducts.filter(product => action.id !== product.id);\n      let newTotal = state.total - productToRemove.price * productToRemove.quantity;\n      console.log(productToRemove);\n      return { ...state,\n        addedProducts: new_products,\n        total: newTotal\n      };\n\n    case ADD_QUANTITY:\n      let addedProduct1 = state.products.find(product => product.id === action.id);\n      addedProduct1.quantity += 1;\n      let newTotal1 = state.total + addedProduct1.price;\n      return { ...state,\n        total: newTotal1\n      };\n\n    case SUB_QUANTITY:\n      let addedItem = state.products.find(product => product.id === action.id);\n\n      if (addedItem.quantity === 1) {\n        let new_items = state.addedProducts.filter(product => product.id !== action.id);\n        let newTotal2 = state.total - addedItem.price;\n        return { ...state,\n          addedItems: new_items,\n          total: newTotal2\n        };\n      } else {\n        addedItem.quantity -= 1;\n        let newTotal3 = state.total - addedItem.price;\n        return { ...state,\n          total: newTotal3\n        };\n      }\n\n    // case EMPTY_CART:\n    //   return {\n    //     ...state,\n    //     products: state.products.map(product =>\n    //       product.selected\n    //         ? {...product, selected: false, quantity: 1}\n    //         : product,\n    //     ),\n    //   };\n\n    default:\n      return state;\n  }\n};\n\nexport default CartReducer;","map":{"version":3,"sources":["/home/kurlyana/UCU/SEM4/WEB/store-general-app/src/redux/reducers.js"],"names":["ADD_TO_CART","REMOVE_FROM_CART","SUB_QUANTITY","ADD_QUANTITY","EMPTY_CART","initialState","products","addedProducts","total","CartReducer","state","action","type","addedProduct","find","product","id","existed_product","quantity","price","newTotal","productToRemove","new_products","filter","console","log","addedProduct1","newTotal1","addedItem","new_items","newTotal2","addedItems","newTotal3"],"mappings":"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","sourcesContent":["import {ADD_TO_CART, REMOVE_FROM_CART, SUB_QUANTITY, ADD_QUANTITY, EMPTY_CART} from './actionTypes.js';\n\nconst initialState = {\n  products: [\n      {\n      \"id\": 0,\n      \"name\": \"TS1\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/07/peugggg2-300x300.jpg\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    },\n    {\n      \"id\": 1,\n      \"name\": \"TS2\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/10/Capture-d%E2%80%99e%CC%81cran-2018-12-19-a%CC%80-3.10.16-PM-300x300.png\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$30\",\n      \"quantity\": 1,\n      \"selected\": false\n    },\n    {\n      \"id\": 2,\n      \"name\": \"TS3\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/07/Sans-titre-5-300x300.jpg\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 3,\n      \"selected\": false\n    },\n    {\n      \"id\": 3,\n      \"name\": \"TS4\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/07/Capture-d%E2%80%99e%CC%81cran-2017-08-21-a%CC%80-12.17.25-copie-300x300.jpg\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    },\n    {\n      \"id\": 4,\n      \"name\": \"TS5\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/07/maillot-cycliste-z-300x300.jpg\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    },\n      {\n      \"id\": 5,\n      \"name\": \"TS6\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/08/HTB14AHhSpXXXXb8XXXXq6xXFXXX9-300x300.jpg\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    }\n    ,\n      {\n      \"id\": 6,\n      \"name\": \"TS7\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/08/Capture-d%E2%80%99e%CC%81cran-2017-09-07-a%CC%80-16.11.50-300x300.png\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    }\n    ,\n      {\n      \"id\": 7,\n      \"name\": \"TS8\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/08/hjbkj-300x300.jpg\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    }\n    ,\n      {\n      \"id\": 8,\n      \"name\": \"TS9\",\n      \"image\": \"https://i.ebayimg.com/images/g/tqcAAOSwXIdcO4gp/s-l300.png\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    }\n    ,\n      {\n      \"id\": 9,\n      \"name\": \"TS10\",\n      \"image\": \"https://shop.vintageofbikes.com/wp-content/uploads/2017/08/kbj-300x300.jpg\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    }\n    ,\n      {\n      \"id\": 10,\n      \"name\": \"TS11\",\n      \"image\": \"https://i.ebayimg.com/images/g/0IUAAOSw0NVbt6aG/s-l300.jpg\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    }\n    ,\n      {\n      \"id\": 11,\n      \"name\": \"TS12\",\n      \"image\": \"https://cdn.shopify.com/s/files/1/0012/0438/7852/products/peugeot-michelin-esso-shell-retro-cycling-jersey-cycling-jersey-outdoor-good-store-white-s-8_300x300.jpg?v=1574496722\",\n      \"desc\": \"Nice velo T-shirt\",\n      \"price\": \"$20\",\n      \"quantity\": 2,\n      \"selected\": false\n    }\n  ],\n  addedProducts:[],\n  total: 0\n};\n\nconst CartReducer = (state = initialState, action) => {\n  switch (action.type) {\n\n    case ADD_TO_CART:\n         let addedProduct = state.products.find(product=> product.id === action.id)\n         let existed_product= state.addedProducts.find(product=> action.id === product.id)\n         if(existed_product)\n         {\n            addedProduct.quantity += 1\n             return{\n                ...state,\n                 total: state.total + addedProduct.price\n                  }\n         }\n         else{\n             addedProduct.quantity = 1;\n             let newTotal = state.total + addedProduct.price\n\n             return{\n                ...state,\n                addedProducts: [...state.addedProducts, addedProduct],\n                total : newTotal\n            }\n         }\n\n    case REMOVE_FROM_CART:\n        let productToRemove= state.addedProducts.find(product=> action.id === product.id)\n        let new_products = state.addedProducts.filter(product=> action.id !== product.id)\n\n        let newTotal = state.total - (productToRemove.price * productToRemove.quantity )\n        console.log(productToRemove)\n        return{\n            ...state,\n            addedProducts: new_products,\n            total: newTotal\n        }\n\n    case ADD_QUANTITY:\n          let addedProduct1 = state.products.find(product=> product.id === action.id)\n          addedProduct1.quantity += 1\n          let newTotal1 = state.total + addedProduct1.price\n          return{\n              ...state,\n              total: newTotal1\n          }\n\n    case SUB_QUANTITY:\n      let addedItem = state.products.find(product=> product.id === action.id)\n        if(addedItem.quantity === 1){\n            let new_items = state.addedProducts.filter(product=>product.id !== action.id)\n            let newTotal2 = state.total - addedItem.price\n            return{\n                ...state,\n                addedItems: new_items,\n                total: newTotal2\n            }\n        }\n        else {\n            addedItem.quantity -= 1\n            let newTotal3 = state.total - addedItem.price\n            return{\n                ...state,\n                total: newTotal3\n            }\n        }\n\n    // case EMPTY_CART:\n    //   return {\n    //     ...state,\n    //     products: state.products.map(product =>\n    //       product.selected\n    //         ? {...product, selected: false, quantity: 1}\n    //         : product,\n    //     ),\n    //   };\n\n    default:\n      return state;\n  }\n};\n\nexport default CartReducer;"]},"metadata":{},"sourceType":"module"}